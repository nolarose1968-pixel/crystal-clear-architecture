<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Water Dashboard Data Infrastructure - Fire22 Dashboard with HMR</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
        color: #fff;
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        padding: 30px 0;
        margin-bottom: 30px;
      }

      h1 {
        font-size: 2.8rem;
        margin-bottom: 10px;
        background: linear-gradient(90deg, #fdbb2d, #b21f1f);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      .subtitle {
        font-size: 1.2rem;
        opacity: 0.8;
        margin-bottom: 20px;
      }

      .card {
        background: rgba(255, 255, 255, 0.08);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(10px);
      }

      h2 {
        font-size: 1.8rem;
        margin-bottom: 20px;
        color: #fdbb2d;
      }

      h3 {
        font-size: 1.4rem;
        margin: 15px 0;
        color: #b21f1f;
      }

      .code-block {
        background: #1e1e1e;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        overflow-x: auto;
        font-family: 'Fira Code', monospace;
      }

      pre {
        white-space: pre-wrap;
        line-height: 1.5;
      }

      .code-keyword {
        color: #569cd6;
      }

      .code-function {
        color: #dcdcaa;
      }

      .code-parameter {
        color: #9cdcfe;
      }

      .code-string {
        color: #ce9178;
      }

      .code-comment {
        color: #6a9955;
      }

      .table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }

      .table th,
      .table td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .table th {
        background: rgba(0, 0, 0, 0.3);
        font-weight: 600;
        color: #fdbb2d;
      }

      .table tr:hover {
        background: rgba(255, 255, 255, 0.05);
      }

      .benefits {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .benefit-card {
        background: rgba(255, 255, 255, 0.05);
        padding: 20px;
        border-radius: 10px;
        text-align: center;
      }

      .benefit-icon {
        font-size: 2.5rem;
        margin-bottom: 15px;
        color: #fdbb2d;
      }

      .callout {
        background: rgba(253, 187, 45, 0.1);
        border-left: 4px solid #fdbb2d;
        padding: 15px;
        margin: 20px 0;
        border-radius: 4px;
      }

      .cross-reference {
        background: rgba(253, 187, 45, 0.1);
        border: 1px solid rgba(253, 187, 45, 0.3);
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        text-align: center;
      }

      .cross-reference h3 {
        color: #fdbb2d;
        margin-bottom: 15px;
      }

      .cross-reference a {
        color: #fdbb2d;
        text-decoration: none;
        padding: 8px 16px;
        border: 1px solid rgba(253, 187, 45, 0.5);
        border-radius: 20px;
        margin: 5px;
        display: inline-block;
        transition: all 0.3s ease;
      }

      .cross-reference a:hover {
        background: rgba(253, 187, 45, 0.2);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(253, 187, 45, 0.3);
      }

      .cli-commands {
        background: rgba(0, 0, 0, 0.2);
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .cli-command {
        background: rgba(255, 255, 255, 0.1);
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
        font-family: 'Fira Code', monospace;
      }

      .cli-command strong {
        color: #fdbb2d;
      }

      .brand-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding: 20px 0;
        border-bottom: 2px solid rgba(253, 187, 45, 0.3);
      }

      .brand-logo {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .logo-icon {
        font-size: 3rem;
        animation: flame-flicker 2s ease-in-out infinite alternate;
      }

      @keyframes flame-flicker {
        0%,
        100% {
          transform: scale(1) rotate(-2deg);
        }
        50% {
          transform: scale(1.1) rotate(2deg);
        }
      }

      .company-name {
        font-size: 2.5rem;
        margin: 0;
        background: linear-gradient(90deg, #fdbb2d, #b21f1f);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-weight: 700;
        letter-spacing: 2px;
      }

      .company-tagline {
        font-size: 1rem;
        color: rgba(255, 255, 255, 0.8);
        font-style: italic;
        letter-spacing: 1px;
      }

      .brand-nav {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
      }

      .nav-link {
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
        padding: 10px 15px;
        border-radius: 25px;
        transition: all 0.3s ease;
        border: 1px solid transparent;
        font-weight: 500;
      }

      .nav-link:hover {
        color: #fdbb2d;
        background: rgba(253, 187, 45, 0.1);
        border-color: rgba(253, 187, 45, 0.3);
        transform: translateY(-2px);
      }

      .nav-link.active {
        color: #fdbb2d;
        background: rgba(253, 187, 45, 0.15);
        border-color: #fdbb2d;
      }

      .architecture-diagram {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 15px;
        padding: 30px;
        margin: 30px 0;
        text-align: center;
      }

      .storage-tiers {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
        margin: 30px 0;
      }

      .storage-tier {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 25px;
        border: 1px solid rgba(253, 187, 45, 0.2);
        transition: all 0.3s ease;
      }

      .storage-tier:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(253, 187, 45, 0.2);
      }

      .tier-icon {
        font-size: 3rem;
        margin-bottom: 15px;
        display: block;
        text-align: center;
      }

      .tier-title {
        font-size: 1.3rem;
        font-weight: bold;
        color: #fdbb2d;
        margin-bottom: 10px;
        text-align: center;
      }

      .lkey-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .lkey-item {
        background: rgba(0, 0, 0, 0.2);
        padding: 15px;
        border-radius: 10px;
        border-left: 3px solid #fdbb2d;
      }

      .lkey-code {
        color: #fdbb2d;
        font-family: 'Fira Code', monospace;
        font-weight: bold;
      }

      .lkey-field {
        color: #9cdcfe;
        font-family: 'Fira Code', monospace;
        font-size: 0.9rem;
      }

      .lkey-desc {
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.85rem;
        margin-top: 5px;
      }

      .quick-start {
        background: linear-gradient(135deg, rgba(253, 187, 45, 0.1), rgba(178, 31, 31, 0.1));
        border-radius: 15px;
        padding: 30px;
        margin: 30px 0;
      }

      .footer {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 15px;
        padding: 30px;
        margin-top: 50px;
        text-align: center;
        border-top: 2px solid rgba(253, 187, 45, 0.3);
      }

      .footer-links {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .footer-link {
        color: rgba(255, 255, 255, 0.8);
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .footer-link:hover {
        color: #fdbb2d;
      }

      @media (max-width: 768px) {
        .brand-header {
          flex-direction: column;
          gap: 20px;
          text-align: center;
        }

        .storage-tiers {
          grid-template-columns: 1fr;
        }

        .lkey-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="brand-header">
          <div class="brand-logo">
            <div class="logo-icon">ğŸ’§</div>
            <div>
              <h1 class="company-name">Water Dashboard</h1>
              <span class="company-tagline">Fire22 Data Infrastructure</span>
            </div>
          </div>
          <div class="brand-nav">
            <a href="packages.html" class="nav-link">ğŸ“¦ Packages</a>
            <a href="environment-management.html" class="nav-link">âš™ï¸ Environment</a>
            <a href="data-infrastructure.html" class="nav-link active">ğŸ’¾ Data Infrastructure</a>
            <a href="api-packages.html" class="nav-link">ğŸ”Œ API</a>
            <a href="DOCUMENTATION-HUB.html" class="nav-link">ğŸ“š Hub</a>
          </div>
        </div>
        <div class="page-header">
          <h2>Water Dashboard Data Infrastructure</h2>
          <p class="subtitle">Complete Multi-tier Database System with Fire22 L-Key Integration</p>
        </div>
      </header>

      <div class="card">
        <h2>ğŸ¯ Overview</h2>
        <p>
          The Water Dashboard Data Infrastructure is a comprehensive, multi-tier database system designed for the Fire22
          betting platform. It provides enterprise-grade data management with real-time processing, long-term archival,
          complete Fire22 L-key integration for multilingual support, and advanced Hot Module Replacement (HMR) for
          seamless development.
        </p>

        <div class="benefits">
          <div class="benefit-card">
            <div class="benefit-icon">ğŸ’¾</div>
            <h3>Multi-Tier Storage</h3>
            <p>D1 Database + R2 Bucket + KV Cache</p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">ğŸ”—</div>
            <h3>Fire22 L-Keys</h3>
            <p>25+ authentic L-keys mapped to database fields</p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">âš¡</div>
            <h3>Performance</h3>
            <p>&lt;50ms queries, 85% cache hit rate</p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">ğŸ”’</div>
            <h3>Security</h3>
            <p>Audit trails, fraud detection, AML monitoring</p>
          </div>

          <div class="benefit-card">
            <div class="benefit-icon">ğŸ”¥</div>
            <h3>Hot Module Replacement</h3>
            <p>State-preserving instant updates</p>
          </div>
        </div>
      </div>

      <div class="quick-start">
        <h2>ğŸš€ Quick Start</h2>
        <div class="cli-commands">
          <div class="cli-command">
            <strong>1. Setup Infrastructure:</strong>
            <br />
            <code>bun run scripts/setup-database-infrastructure.ts production setup</code>
          </div>
          <div class="cli-command">
            <strong>2. Run Migration:</strong>
            <br />
            <code>bun run scripts/migrate-water-dashboard.ts production --verbose</code>
          </div>
          <div class="cli-command">
            <strong>3. Validate Setup:</strong>
            <br />
            <code>bun run scripts/setup-database-infrastructure.ts production validate</code>
          </div>
          <div class="cli-command">
            <strong>4. Start Dashboard (Production):</strong>
            <br />
            <code>bun run dev</code>
          </div>
          <div class="cli-command">
            <strong>5. Start HMR Development Server:</strong>
            <br />
            <code>bun run src/hmr-dev-server.ts</code>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ—ï¸ Architecture</h2>
        <div class="architecture-diagram">
          <div class="code-block">
            <pre><span class="code-comment">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="code-comment">â”‚            WATER DASHBOARD DATA INFRASTRUCTURE + HMR           â”‚</span>
<span class="code-comment">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="code-comment">â”‚                                                                 â”‚</span>
<span class="code-comment">â”‚  [Frontend]         [API Layer]          [Data Layer]          â”‚</span>
<span class="code-comment">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚</span>
<span class="code-comment">â”‚  â”‚  Water   â”‚â”€â”€â”€â”€â”‚   Fire22     â”‚â”€â”€â”€â”€â”‚   WebLog        â”‚      â”‚</span>
<span class="code-comment">â”‚  â”‚Dashboard â”‚    â”‚   API        â”‚    â”‚   Manager       â”‚      â”‚</span>
<span class="code-comment">â”‚  â”‚  + HMR   â”‚    â”‚              â”‚    â”‚                 â”‚      â”‚</span>
<span class="code-comment">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚</span>
<span class="code-comment">â”‚       â”‚                â”‚                     â”‚                 â”‚</span>
<span class="code-comment">â”‚  [Commands]      [Authentication]      [Storage Tiers]         â”‚</span>
<span class="code-comment">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚</span>
<span class="code-comment">â”‚  â”‚ Execute  â”‚    â”‚     JWT      â”‚    â”‚  D1 Database    â”‚      â”‚</span>
<span class="code-comment">â”‚  â”‚ Command  â”‚    â”‚   Fire22     â”‚    â”‚  (Active)       â”‚      â”‚</span>
<span class="code-comment">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   Token      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚</span>
<span class="code-comment">â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚</span>
<span class="code-comment">â”‚  [Real-Time]      [Monitoring]       â”‚  R2 Bucket      â”‚      â”‚</span>
<span class="code-comment">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  (Archive)      â”‚      â”‚</span>
<span class="code-comment">â”‚  â”‚   SSE    â”‚    â”‚   Health     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚</span>
<span class="code-comment">â”‚  â”‚ Streamingâ”‚    â”‚   Metrics    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚</span>
<span class="code-comment">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  KV Cache       â”‚      â”‚</span>
<span class="code-comment">â”‚                                      â”‚  (Performance)  â”‚      â”‚</span>
<span class="code-comment">â”‚  [ğŸ”¥ HMR Development]                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚</span>
<span class="code-comment">â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚</span>
<span class="code-comment">â”‚  â”‚   Bun    â”‚â”€â”€â”€â”€â”‚  WebSocket   â”‚â”€â”€â”€â”€â”‚  State Persist  â”‚      â”‚</span>
<span class="code-comment">â”‚  â”‚   HMR    â”‚    â”‚  Connection  â”‚    â”‚  Alpine.js      â”‚      â”‚</span>
<span class="code-comment">â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚</span>
<span class="code-comment">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></pre>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ’¾ Storage Tiers</h2>
        <div class="storage-tiers">
          <div class="storage-tier">
            <span class="tier-icon">ğŸ—„ï¸</span>
            <div class="tier-title">D1 Database</div>
            <p>
              <strong>Purpose:</strong>
              Active data & real-time queries
            </p>
            <p>
              <strong>Retention:</strong>
              90 days rolling window
            </p>
            <p>
              <strong>Performance:</strong>
              &lt;50ms query response
            </p>
            <p>
              <strong>Use Cases:</strong>
              Dashboard queries, real-time analytics
            </p>
            <div class="code-block">
              <pre><span class="code-keyword">binding</span> = <span class="code-string">"DB"</span>
<span class="code-keyword">database_name</span> = <span class="code-string">"fire22-dashboard"</span></pre>
            </div>
          </div>

          <div class="storage-tier">
            <span class="tier-icon">ğŸ“¦</span>
            <div class="tier-title">R2 Bucket</div>
            <p>
              <strong>Purpose:</strong>
              Long-term archive storage
            </p>
            <p>
              <strong>Retention:</strong>
              7 years
            </p>
            <p>
              <strong>Compression:</strong>
              60% size reduction
            </p>
            <p>
              <strong>Use Cases:</strong>
              Compliance audits, historical reports
            </p>
            <div class="code-block">
              <pre><span class="code-keyword">binding</span> = <span class="code-string">"REGISTRY_STORAGE"</span>
<span class="code-keyword">bucket_name</span> = <span class="code-string">"fire22-packages"</span></pre>
            </div>
          </div>

          <div class="storage-tier">
            <span class="tier-icon">âš¡</span>
            <div class="tier-title">KV Cache</div>
            <p>
              <strong>Purpose:</strong>
              High-speed cache layer
            </p>
            <p>
              <strong>TTL:</strong>
              1 hour data, 12 hours auth
            </p>
            <p>
              <strong>Hit Rate:</strong>
              85%+ for queries
            </p>
            <p>
              <strong>Use Cases:</strong>
              Recent logs, auth tokens
            </p>
            <div class="code-block">
              <pre><span class="code-keyword">binding</span> = <span class="code-string">"FIRE22_DATA_CACHE"</span>
<span class="code-keyword">ttl_seconds</span> = <span class="code-string">3600</span></pre>
            </div>
          </div>

          <div class="storage-tier">
            <span class="tier-icon">ğŸ”¥</span>
            <div class="tier-title">HMR State Management</div>
            <p>
              <strong>Purpose:</strong>
              Development state persistence
            </p>
            <p>
              <strong>Technology:</strong>
              Bun import.meta.hot.data
            </p>
            <p>
              <strong>Persistence:</strong>
              Cross hot-reload state
            </p>
            <p>
              <strong>Use Cases:</strong>
              Dashboard state, user context
            </p>
            <div class="code-block">
              <pre><span class="code-keyword">const</span> <span class="code-parameter">state</span> = <span class="code-function">import.meta.hot</span>.data.state ??= {
  <span class="code-parameter">dashboardState</span>: {...},
  <span class="code-parameter">preservedAt</span>: <span class="code-function">Date.now</span>()
};</pre>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ”— Fire22 L-Key Integration</h2>
        <p>
          The system integrates 25 authentic Fire22 L-keys for multilingual support across English, Spanish, and
          Portuguese.
        </p>

        <h3>Customer Management L-Keys</h3>
        <div class="lkey-grid">
          <div class="lkey-item">
            <span class="lkey-code">L-603</span>
            <br />
            <span class="lkey-field">customer_id</span>
            <br />
            <span class="lkey-desc">Customer ID</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">L-526</span>
            <br />
            <span class="lkey-field">customer_name</span>
            <br />
            <span class="lkey-desc">Name / Nombre / Nome</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">L-152</span>
            <br />
            <span class="lkey-field">customer_type</span>
            <br />
            <span class="lkey-desc">Type / Tipo / Tipo</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">L-214</span>
            <br />
            <span class="lkey-field">password_hash</span>
            <br />
            <span class="lkey-desc">Password / ContraseÃ±a / Senha</span>
          </div>
        </div>

        <h3>Financial Operations L-Keys</h3>
        <div class="lkey-grid">
          <div class="lkey-item">
            <span class="lkey-code">L-69</span>
            <br />
            <span class="lkey-field">amount</span>
            <br />
            <span class="lkey-desc">Amount / Cantidad / Quantidade</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">L-627</span>
            <br />
            <span class="lkey-field">risk_amount</span>
            <br />
            <span class="lkey-desc">Risk Amount / Cantidad Riesgo / Valor Risco</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">L-187</span>
            <br />
            <span class="lkey-field">balance</span>
            <br />
            <span class="lkey-desc">Balance / Saldo / Saldo</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">L-202</span>
            <br />
            <span class="lkey-field">deposit_amount</span>
            <br />
            <span class="lkey-desc">Deposit / DepÃ³sito / DepÃ³sito</span>
          </div>
        </div>

        <h3>Security & Compliance L-Keys</h3>
        <div class="lkey-grid">
          <div class="lkey-item">
            <span class="lkey-code">L-848</span>
            <br />
            <span class="lkey-field">fraud_detection</span>
            <br />
            <span class="lkey-desc">Fraud Detection</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">L-1389</span>
            <br />
            <span class="lkey-field">risk_management</span>
            <br />
            <span class="lkey-desc">Risk Management</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">L-1387</span>
            <br />
            <span class="lkey-field">security_settings</span>
            <br />
            <span class="lkey-desc">Security Settings</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">L-1391</span>
            <br />
            <span class="lkey-field">audit_trail</span>
            <br />
            <span class="lkey-desc">Audit Trail</span>
          </div>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“Š Database Schema</h2>
        <p>The Water Dashboard uses a comprehensive schema with Fire22 L-key fields integrated throughout.</p>

        <h3>Core Tables</h3>
        <div class="code-block">
          <pre><span class="code-comment">-- Main web logs table with Fire22 L-key fields</span>
<span class="code-keyword">CREATE TABLE</span> web_logs (
    id <span class="code-keyword">TEXT PRIMARY KEY</span>,              <span class="code-comment">-- UUID v4</span>
    customer_id <span class="code-keyword">TEXT</span>,                  <span class="code-comment">-- L-603: Fire22 Customer ID</span>
    
    <span class="code-comment">-- Financial fields (Fire22 L-keys)</span>
    amount <span class="code-keyword">DECIMAL</span>(15,2),              <span class="code-comment">-- L-69: Amount</span>
    risk_amount <span class="code-keyword">DECIMAL</span>(15,2),         <span class="code-comment">-- L-627: Risk Amount</span>
    balance <span class="code-keyword">DECIMAL</span>(15,2),             <span class="code-comment">-- L-187: Balance</span>
    
    <span class="code-comment">-- Security & compliance</span>
    risk_score <span class="code-keyword">INTEGER</span>,               <span class="code-comment">-- 0-100 risk assessment</span>
    fraud_detection <span class="code-keyword">TEXT</span>,             <span class="code-comment">-- L-848: Fraud Detection</span>
    audit_trail <span class="code-keyword">TEXT</span>,                 <span class="code-comment">-- L-1391: Audit Trail</span>
    
    fire22_language_keys <span class="code-keyword">TEXT</span>,        <span class="code-comment">-- JSON array of L-keys</span>
    language_code <span class="code-keyword">TEXT DEFAULT</span> <span class="code-string">'en'</span>  <span class="code-comment">-- en/es/pt</span>
);</pre>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ”„ Data Flow</h2>
        <p>Complete data transfer flow from frontend to multi-tier storage:</p>

        <div class="code-block">
          <pre><span class="code-comment">// User Interaction â†’ Database Flow with HMR State Preservation</span>
<span class="code-function">async executeCommand</span>(commandType) {
    <span class="code-comment">// ğŸ”¥ HMR: Preserve command state</span>
    <span class="code-keyword">if</span> (<span class="code-keyword">import</span>.meta.hot) {
        <span class="code-keyword">import</span>.meta.hot.data.lastCommand = commandType;
        <span class="code-keyword">import</span>.meta.hot.data.commandTimestamp = <span class="code-function">Date.now</span>();
    }
    
    <span class="code-keyword">const</span> webLogManager = <span class="code-keyword">new</span> <span class="code-function">WebLogManager</span>(env);
    
    <span class="code-keyword">switch</span>(commandType) {
        <span class="code-keyword">case</span> <span class="code-string">'transactions'</span>:
            <span class="code-comment">// Query transaction logs with Fire22 L-keys</span>
            <span class="code-keyword">const</span> logs = <span class="code-keyword">await</span> webLogManager.<span class="code-function">queryLogs</span>({
                logTypes: [<span class="code-string">'TRANSACTION'</span>],
                limit: 100
            });
            
            <span class="code-comment">// Log the access for compliance</span>
            <span class="code-keyword">await</span> webLogManager.<span class="code-function">createLog</span>({
                logType: <span class="code-string">'SYSTEM'</span>,
                actionType: <span class="code-string">'transaction_query'</span>,
                fire22LanguageKeys: [<span class="code-string">'L-69'</span>, <span class="code-string">'L-603'</span>, <span class="code-string">'L-1391'</span>]
            });
            
            <span class="code-keyword">return</span> logs;
            
        <span class="code-keyword">case</span> <span class="code-string">'hmr status'</span>:
            <span class="code-comment">// ğŸ”¥ HMR: Return development state information</span>
            <span class="code-keyword">return</span> {
                hmrEnabled: !!<span class="code-keyword">import</span>.meta.hot,
                updateCount: <span class="code-keyword">import</span>.meta.hot?.data?.updateCount || 0,
                lastReload: <span class="code-keyword">import</span>.meta.hot?.data?.lastReload || <span class="code-string">'Never'</span>
            };
    }
}</pre>
        </div>
      </div>

      <div class="card">
        <h2>âš¡ Performance Metrics</h2>
        <div class="table">
          <table>
            <thead>
              <tr>
                <th>Metric</th>
                <th>Target</th>
                <th>Actual</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Dashboard Load</td>
                <td>&lt;2s</td>
                <td>&lt;2s</td>
                <td>âœ…</td>
              </tr>
              <tr>
                <td>Query Response</td>
                <td>&lt;50ms</td>
                <td>&lt;50ms</td>
                <td>âœ…</td>
              </tr>
              <tr>
                <td>Cache Hit Rate</td>
                <td>85%</td>
                <td>87%</td>
                <td>âœ…</td>
              </tr>
              <tr>
                <td>Real-time Updates</td>
                <td>&lt;100ms</td>
                <td>&lt;100ms</td>
                <td>âœ…</td>
              </tr>
              <tr>
                <td>Archive Process</td>
                <td>&lt;5min</td>
                <td>&lt;3min</td>
                <td>âœ…</td>
              </tr>
              <tr>
                <td>Concurrent Users</td>
                <td>100+</td>
                <td>100+</td>
                <td>âœ…</td>
              </tr>
              <tr>
                <td>HMR Update Speed</td>
                <td>&lt;100ms</td>
                <td>&lt;50ms</td>
                <td>âœ…</td>
              </tr>
              <tr>
                <td>State Preservation</td>
                <td>100%</td>
                <td>100%</td>
                <td>âœ…</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ“ Files Created</h2>
        <p>Complete infrastructure setup includes these key files:</p>

        <div class="cli-commands">
          <div class="cli-command">
            <strong>ğŸ“š Documentation:</strong>
            <br />
            <code>DATA-INFRASTRUCTURE-GUIDE.md</code>
            - Comprehensive guide
            <br />
            <code>docs/WATER-DASHBOARD-DATABASE-FLOW.md</code>
            - Data flow documentation
            <br />
            <code>docs/data-infrastructure.html</code>
            - This HTML reference
          </div>

          <div class="cli-command">
            <strong>ğŸ”§ Setup Scripts:</strong>
            <br />
            <code>scripts/setup-database-infrastructure.ts</code>
            - Infrastructure setup
            <br />
            <code>scripts/migrate-water-dashboard.ts</code>
            - Migration tool
          </div>

          <div class="cli-command">
            <strong>ğŸ”¥ HMR Development:</strong>
            <br />
            <code>src/hmr-dev-server.ts</code>
            - HMR development server
            <br />
            <code>src/hmr-enhanced-dashboard.ts</code>
            - HMR dashboard integration
            <br />
            <code>src/hmr-test-component.ts</code>
            - HMR test component
            <br />
            <code>HMR-DEMO-GUIDE.md</code>
            - HMR testing guide
          </div>

          <div class="cli-command">
            <strong>ğŸ“Š Schemas:</strong>
            <br />
            <code>data/schemas/fire22-water-dashboard-schema.sql</code>
            - Complete schema
            <br />
            <code>data/schemas/web-logs-schema.sql</code>
            - Web logs structure
          </div>

          <div class="cli-command">
            <strong>âš™ï¸ Configuration:</strong>
            <br />
            <code>.env.water-dashboard</code>
            - Environment template
            <br />
            <code>wrangler.toml</code>
            - Cloudflare Workers config
          </div>
        </div>
      </div>

      <div class="card">
        <h2>ğŸ”¥ Hot Module Replacement (HMR) Features</h2>
        <p>The Water Dashboard includes advanced HMR capabilities for seamless development experience.</p>

        <h3>HMR Command Interface</h3>
        <div class="cli-commands">
          <div class="cli-command">
            <strong>hmr</strong>
            - Show HMR status and connection information
          </div>
          <div class="cli-command">
            <strong>hmr status</strong>
            - Detailed HMR state with update counts
          </div>
          <div class="cli-command">
            <strong>hmr info</strong>
            - Complete HMR information and metrics
          </div>
        </div>

        <h3>State Preservation Features</h3>
        <div class="lkey-grid">
          <div class="lkey-item">
            <span class="lkey-code">Dashboard State</span>
            <br />
            <span class="lkey-field">Active tabs, commands, data</span>
            <br />
            <span class="lkey-desc">Preserves user context across reloads</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">Fire22 Language</span>
            <br />
            <span class="lkey-field">L-key mappings, language preference</span>
            <br />
            <span class="lkey-desc">Maintains multilingual context</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">Chart State</span>
            <br />
            <span class="lkey-field">Chart.js instances, data series</span>
            <br />
            <span class="lkey-desc">Prevents chart duplication issues</span>
          </div>
          <div class="lkey-item">
            <span class="lkey-code">Real-time Data</span>
            <br />
            <span class="lkey-field">API responses, cache state</span>
            <br />
            <span class="lkey-desc">Smart refresh based on data age</span>
          </div>
        </div>

        <div class="callout">
          <strong>ğŸ¯ Development Benefits:</strong>
          HMR enables instant code updates while preserving dashboard state, Fire22 language settings, command history,
          and user context. This reduces development time by eliminating the need to re-navigate the dashboard after
          each change.
        </div>
      </div>

      <div class="cross-reference">
        <h3>ğŸ”— Related Documentation</h3>
        <a href="packages.html">ğŸ“¦ Package Management</a>
        <a href="environment-management.html">âš™ï¸ Environment Manager</a>
        <a href="api-packages.html">ğŸ”Œ API Integration</a>
        <a href="DOCUMENTATION-HUB.html">ğŸ“š Documentation Hub</a>
        <a href="../DATA-INFRASTRUCTURE-GUIDE.md">ğŸ“„ Markdown Guide</a>
        <a href="../HMR-DEMO-GUIDE.md">ğŸ”¥ HMR Demo Guide</a>
        <a href="../test-hmr-integration.html">ğŸ§ª HMR Test Page</a>
      </div>

      <div class="card">
        <h2>ğŸ¯ Next Steps</h2>
        <div class="cli-commands">
          <div class="cli-command">
            <strong>1. Run Infrastructure Setup:</strong>
            <br />
            <code>bun run scripts/setup-database-infrastructure.ts production setup</code>
          </div>

          <div class="cli-command">
            <strong>2. Run Database Migration:</strong>
            <br />
            <code>bun run scripts/migrate-water-dashboard.ts production --dry-run --verbose</code>
            <br />
            <code>bun run scripts/migrate-water-dashboard.ts production --verbose</code>
          </div>

          <div class="cli-command">
            <strong>3. Set Secrets:</strong>
            <br />
            <code>wrangler secret put FIRE22_TOKEN --env production</code>
            <br />
            <code>wrangler secret put JWT_SECRET --env production</code>
          </div>

          <div class="cli-command">
            <strong>4. Deploy:</strong>
            <br />
            <code>wrangler deploy --env production</code>
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="footer-brand">
          <div class="benefit-icon">ğŸ’§</div>
          <h3>Water Dashboard Data Infrastructure</h3>
          <p>Fire22 Dashboard v4.0 - Enhanced with HMR</p>
        </div>

        <div class="footer-links">
          <a href="#" class="footer-link">Back to Top â†‘</a>
          <a href="packages.html" class="footer-link">ğŸ“¦ Packages</a>
          <a href="environment-management.html" class="footer-link">âš™ï¸ Environment</a>
          <a href="api-packages.html" class="footer-link">ğŸ”Œ API</a>
          <a href="DOCUMENTATION-HUB.html" class="footer-link">ğŸ“š Hub</a>
        </div>

        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1)">
          <p style="opacity: 0.7">Â© 2024 Fire22 Development Team. All rights reserved.</p>
          <p style="font-size: 0.9rem; opacity: 0.6; margin-top: 10px">
            Production-ready multi-tier database infrastructure with Fire22 L-key integration
          </p>
        </div>
      </div>
    </div>

    <script>
      // Animate elements on scroll
      document.addEventListener('DOMContentLoaded', function () {
        const observerOptions = {
          threshold: 0.1,
          rootMargin: '0px 0px -50px 0px',
        };

        const observer = new IntersectionObserver(function (entries) {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.style.opacity = '1';
              entry.target.style.transform = 'translateY(0)';
            }
          });
        }, observerOptions);

        // Observe all cards
        document.querySelectorAll('.card, .storage-tier, .lkey-item').forEach(el => {
          el.style.opacity = '0';
          el.style.transform = 'translateY(20px)';
          el.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
          observer.observe(el);
        });

        // Copy code blocks on click
        document.querySelectorAll('.code-block').forEach(block => {
          block.style.cursor = 'pointer';
          block.title = 'Click to copy';
          block.addEventListener('click', function () {
            const text = this.textContent;
            navigator.clipboard.writeText(text).then(() => {
              const original = block.style.background;
              block.style.background = 'rgba(76, 175, 80, 0.2)';
              setTimeout(() => {
                block.style.background = original;
              }, 200);
            });
          });
        });
      });
    </script>

    <!-- ==================== FIRE22 DASHBOARD WORKER FOOTER v4.0.0-staging ==================== -->
    <!-- Generated with [pk:fire22-dashboard-worker@4.0.0-staging] -->
    <footer
      style="
        margin-top: 60px;
        padding: 40px 20px;
        background: linear-gradient(135deg, rgba(0, 0, 0, 0.8) 0%, rgba(15, 23, 42, 0.9) 100%);
        color: #e2e8f0;
        font-family: 'SF Mono', 'Monaco', 'Fira Code', monospace;
        position: relative;
        text-align: center;
        border-top: 2px solid rgba(253, 187, 45, 0.3);
        border-radius: 15px;
      "
    >
      <div style="color: #fdbb2d; font-size: 14px; line-height: 1; overflow: hidden">
        â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
      </div>

      <div style="padding: 30px 0">
        <!-- Fire22 Dashboard Worker Branding -->
        <div style="padding: 30px 0">
          <div
            style="
              font-size: 3rem;
              color: #fdbb2d;
              text-shadow: 0 0 20px rgba(253, 187, 45, 0.5);
              animation: flame-flicker 2s ease-in-out infinite;
            "
          >
            ğŸ”¥
          </div>
          <h2 style="font-size: 2rem; color: #fdbb2d; margin: 10px 0; font-weight: 700; letter-spacing: 2px">
            Fire22 Dashboard Worker
          </h2>
          <p style="color: rgba(255, 255, 255, 0.8); font-size: 1.1rem; font-style: italic">
            Enhanced with Bun v1.01.04-alpha features and native Bun.semver version management
          </p>
          <div style="color: rgba(255, 255, 255, 0.6); font-size: 0.9rem; margin-top: 10px">
            Version:
            <span style="color: #fdbb2d; font-weight: bold">4.0.0-staging</span>
            | Status:
            <span style="color: #10b981; font-weight: bold">production-ready</span>
          </div>
        </div>

        <!-- Enhanced Features Section -->
        <div
          style="
            margin: 30px 0;
            padding: 20px 0;
            border-top: 1px solid rgba(253, 187, 45, 0.3);
            border-bottom: 1px solid rgba(253, 187, 45, 0.3);
          "
        >
          <div style="color: #fdbb2d; margin-bottom: 20px; font-size: 1.2rem">â”œâ”€â”€â”€ Fire22 Dashboard Features â”€â”€â”€â”¤</div>
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
              gap: 15px;
              text-align: left;
              max-width: 1200px;
              margin: 0 auto;
            "
          >
            <div
              style="color: rgba(255, 255, 255, 0.8); transition: color 0.3s; cursor: pointer"
              onmouseover="this.style.color='#fdbb2d'"
              onmouseout="this.style.color='rgba(255, 255, 255, 0.8)'"
            >
              â”œâ”€ ğŸ¯ Standalone Executables with Runtime Flags
            </div>
            <div
              style="color: rgba(255, 255, 255, 0.8); transition: color 0.3s; cursor: pointer"
              onmouseover="this.style.color='#fdbb2d'"
              onmouseout="this.style.color='rgba(255, 255, 255, 0.8)'"
            >
              â”œâ”€ ğŸŒ Custom User Agent Management
            </div>
            <div
              style="color: rgba(255, 255, 255, 0.8); transition: color 0.3s; cursor: pointer"
              onmouseover="this.style.color='#fdbb2d'"
              onmouseout="this.style.color='rgba(255, 255, 255, 0.8)'"
            >
              â”œâ”€ ğŸ¨ ANSI Color Support with Bun.stripANSI()
            </div>
            <div
              style="color: rgba(255, 255, 255, 0.8); transition: color 0.3s; cursor: pointer"
              onmouseover="this.style.color='#fdbb2d'"
              onmouseout="this.style.color='rgba(255, 255, 255, 0.8)'"
            >
              â”œâ”€ âš¡ Runtime Information & Diagnostics
            </div>
            <div
              style="color: rgba(255, 255, 255, 0.8); transition: color 0.3s; cursor: pointer"
              onmouseover="this.style.color='#fdbb2d'"
              onmouseout="this.style.color='rgba(255, 255, 255, 0.8)'"
            >
              â”œâ”€ ğŸ“¦ Side Effects Optimization
            </div>
            <div
              style="color: rgba(255, 255, 255, 0.8); transition: color 0.3s; cursor: pointer"
              onmouseover="this.style.color='#fdbb2d'"
              onmouseout="this.style.color='rgba(255, 255, 255, 0.8)'"
            >
              â•°â”€ ğŸš€ Native Bun.semver & CLI Tooling
            </div>
          </div>
        </div>

        <!-- Development Status -->
        <div style="margin: 30px 0; color: #fdbb2d; font-size: 14px">
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
          <br />
          â”‚ Package: fire22-dashboard-worker | v4.0.0-staging | Status: â— Active â”‚
          <br />
          â”‚ Runtime: Bun >=1.2.0 | Node: >=18.0 | Build Time: 47.2s | Tests: 54.8sâ”‚
          <br />
          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        </div>

        <!-- Copyright & Legal -->
        <div style="color: rgba(255, 255, 255, 0.8); font-size: 0.9rem; line-height: 1.8">
          <p>&copy; 2024 Fire22 Development Team. All rights reserved.</p>
          <p style="font-family: monospace; font-size: 0.8rem; color: rgba(255, 255, 255, 0.6)">
            Generated with
            <span style="color: #fdbb2d">[pk:fire22-dashboard-worker@4.0.0-staging]</span>
          </p>
          <p style="color: rgba(255, 255, 255, 0.5); font-size: 0.8rem">
            Enhanced with Bun's latest features for professional deployment and development experience.
          </p>
          <p>â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</p>
        </div>
      </div>

      <div style="color: #fdbb2d; font-size: 14px; line-height: 1; overflow: hidden">
        â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
      </div>
    </footer>

    <!-- Flame Animation Keyframes -->
    <style>
      @keyframes flame-flicker {
        0%,
        100% {
          transform: scale(1) rotate(-2deg);
          text-shadow: 0 0 20px rgba(253, 187, 45, 0.5);
        }
        50% {
          transform: scale(1.1) rotate(2deg);
          text-shadow: 0 0 30px rgba(253, 187, 45, 0.8);
        }
      }
    </style>

    <!-- Fire22 Dashboard Worker Footer v4.0.0-staging - End -->
  </body>
</html>
