<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üë§ Fire22 Customer Management System</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

    <!-- Custom Styles -->
    <style>
      .customer-demo {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .demo-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
        margin-bottom: 20px;
        border: none;
      }

      .customer-interface {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .customer-header {
        background: linear-gradient(45deg, #1e3c72, #2a5298);
        color: white;
        padding: 15px 20px;
        border: none;
      }

      .customer-nav {
        background: #f8f9fa;
        border-bottom: 1px solid #dee2e6;
      }

      .customer-nav .nav-link {
        color: #495057;
        border: none;
        border-radius: 0;
        padding: 12px 20px;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .customer-nav .nav-link:hover {
        background: rgba(30, 60, 114, 0.1);
        color: #1e3c72;
      }

      .customer-nav .nav-link.active {
        background: #1e3c72;
        color: white;
        border-color: #1e3c72;
      }

      .customer-content {
        padding: 0;
        position: relative;
      }

      .content-view {
        display: none;
        padding: 20px;
      }

      .content-view.active {
        display: block;
      }

      .customer-search {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        border: 1px solid #dee2e6;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }

      .stat-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        text-align: center;
        border: 1px solid #e9ecef;
      }

      .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
        font-size: 24px;
      }

      .stat-icon i {
        margin: 0;
      }

      .stat-card h4 {
        margin: 0 0 5px 0;
        font-weight: bold;
        font-size: 1.5rem;
      }

      .stat-card p {
        margin: 0;
        color: #6c757d;
        font-size: 0.9rem;
      }

      .dashboard-actions {
        margin-top: 30px;
      }

      .action-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
      }

      .customer-list {
        max-width: 1200px;
        margin: 0 auto;
      }

      .list-controls {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        border: 1px solid #dee2e6;
      }

      .customer-table-container {
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
      }

      .customer-table {
        margin: 0;
      }

      .customer-table th {
        background: #f8f9fa;
        border-bottom: 2px solid #dee2e6;
        font-weight: 600;
        color: #495057;
      }

      .customer-table td {
        vertical-align: middle;
      }

      .pagination-container {
        margin-top: 20px;
      }

      .customer-search-view {
        max-width: 1000px;
        margin: 0 auto;
      }

      .search-filters {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
      }

      .search-actions {
        text-align: center;
        margin-top: 20px;
      }

      .search-results {
        background: white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
      }

      .search-result-item {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 10px;
        border: 1px solid #e9ecef;
        transition: all 0.3s ease;
      }

      .search-result-item:hover {
        background: #e9ecef;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .customer-form-container {
        max-width: 800px;
        margin: 0 auto;
      }

      .customer-profile {
        max-width: 1000px;
        margin: 0 auto;
      }

      .profile-header {
        background: linear-gradient(45deg, #1e3c72, #2a5298);
        color: white;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
      }

      .profile-content {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
      }

      .profile-section {
        background: #f8f9fa;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
        border: 1px solid #e9ecef;
      }

      .profile-section h6 {
        margin-top: 0;
        color: #495057;
        font-weight: 600;
      }

      .profile-actions {
        display: flex;
        gap: 10px;
      }

      .badge {
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: bold;
      }

      .badge-success {
        background: #28a745;
        color: white;
      }
      .badge-warning {
        background: #ffc107;
        color: #212529;
      }
      .badge-danger {
        background: #dc3545;
        color: white;
      }
      .badge-info {
        background: #17a2b8;
        color: white;
      }
      .badge-secondary {
        background: #6c757d;
        color: white;
      }

      .alert {
        border-radius: 8px;
        border: none;
      }

      .alert-success {
        background: rgba(40, 167, 69, 0.1);
        color: #155724;
        border: 1px solid #28a745;
      }

      .alert-danger {
        background: rgba(220, 53, 69, 0.1);
        color: #721c24;
        border: 1px solid #dc3545;
      }

      .btn {
        border-radius: 6px;
        font-weight: 500;
        padding: 8px 16px;
        transition: all 0.3s ease;
      }

      .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      }

      .btn-success {
        background: linear-gradient(45deg, #28a745, #20c997);
        border: none;
      }

      .btn-danger {
        background: linear-gradient(45deg, #dc3545, #fd7e14);
        border: none;
      }

      .btn-primary {
        background: linear-gradient(45deg, #007bff, #6610f2);
        border: none;
      }

      .btn-secondary {
        background: linear-gradient(45deg, #6c757d, #495057);
        border: none;
      }

      .btn-warning {
        background: linear-gradient(45deg, #ffc107, #fd7e14);
        border: none;
        color: #212529;
      }

      .btn-info {
        background: linear-gradient(45deg, #17a2b8, #6f42c1);
        border: none;
      }

      .loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 10px;
        z-index: 1000;
      }

      .feature-highlight {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
      }

      .component-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .feature-card {
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        text-align: center;
        border: 1px solid #e9ecef;
      }

      .feature-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
        font-size: 24px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
      }

      .demo-controls {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .status-indicator {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 8px;
      }

      .status-success {
        background-color: #28a745;
      }
      .status-error {
        background-color: #dc3545;
      }
      .status-loading {
        background-color: #ffc107;
      }

      .notification-status {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 10px;
      }

      @media (max-width: 768px) {
        .customer-demo {
          padding: 10px;
        }

        .stats-grid {
          grid-template-columns: 1fr;
        }

        .action-buttons {
          flex-direction: column;
          align-items: center;
        }

        .profile-content .row {
          margin: 0;
        }

        .profile-content .col-md-6 {
          margin-bottom: 20px;
        }
      }
    </style>
  </head>
  <body class="customer-demo">
    <div class="container-fluid">
      <div class="row">
        <div class="col-12">
          <!-- Header -->
          <div class="text-center mb-5">
            <div class="d-inline-flex align-items-center gap-3 mb-4">
              <div class="text-4xl">üë§</div>
              <h1 class="h1 text-white">Fire22 Customer Management</h1>
            </div>
            <p class="lead text-white-50 max-w-4xl mx-auto">
              Advanced customer profile management with real-time sync, validation, and comprehensive data management
              system
            </p>
          </div>

          <!-- System Status -->
          <div class="demo-card">
            <h2 class="h4 mb-4 text-gray-800">üîß System Status</h2>
            <div class="row">
              <div class="col-md-3">
                <div class="text-center">
                  <div class="status-indicator status-success"></div>
                  <span>Customer Service</span>
                </div>
              </div>
              <div class="col-md-3">
                <div class="text-center">
                  <div class="status-indicator status-success"></div>
                  <span>Real-time Sync</span>
                </div>
              </div>
              <div class="col-md-3">
                <div class="text-center">
                  <div class="status-indicator status-success"></div>
                  <span>Validation Engine</span>
                </div>
              </div>
              <div class="col-md-3">
                <div class="text-center">
                  <div class="status-indicator status-success"></div>
                  <span>Search Index</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Demo Controls -->
          <div class="demo-card demo-controls">
            <h2 class="h4 mb-4 text-gray-800">üéÆ Demo Controls</h2>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="demo-user">Demo User</label>
                  <select class="form-control" id="demo-user">
                    <option value="admin">Administrator</option>
                    <option value="cashier">Cashier</option>
                    <option value="support">Support Staff</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <label>&nbsp;</label>
                  <div>
                    <button onclick="initializeDemo()" class="btn btn-primary btn-block">
                      <i class="fas fa-play"></i>
                      Start Customer Demo
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Customer Interface Container -->
          <div id="customer-container" class="demo-card" style="display: none">
            <div id="customer-interface-content"></div>
          </div>

          <!-- Features Overview -->
          <div class="demo-card">
            <h2 class="h4 mb-4 text-gray-800">‚ú® Key Features</h2>
            <div class="component-grid">
              <div class="feature-card">
                <div class="feature-icon">
                  <i class="fas fa-user-plus"></i>
                </div>
                <h5>Customer Creation</h5>
                <p>Create comprehensive customer profiles with validation and duplicate detection</p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="fas fa-search"></i>
                </div>
                <h5>Advanced Search</h5>
                <p>Multi-criteria search with real-time indexing and filtering capabilities</p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="fas fa-edit"></i>
                </div>
                <h5>Profile Management</h5>
                <p>Update customer information with audit trails and approval workflows</p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="fas fa-chart-line"></i>
                </div>
                <h5>Risk Assessment</h5>
                <p>Automated risk scoring with financial and gaming behavior analysis</p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="fas fa-sync"></i>
                </div>
                <h5>Real-time Sync</h5>
                <p>WebSocket-based real-time updates across all connected clients</p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="fas fa-shield-alt"></i>
                </div>
                <h5>Data Validation</h5>
                <p>Comprehensive validation with custom rules and cross-field validation</p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="fas fa-file-export"></i>
                </div>
                <h5>Data Export</h5>
                <p>Export customer data in multiple formats with filtering options</p>
              </div>

              <div class="feature-card">
                <div class="feature-icon">
                  <i class="fas fa-history"></i>
                </div>
                <h5>Audit Trail</h5>
                <p>Complete audit trail for all customer data changes and access</p>
              </div>
            </div>
          </div>

          <!-- Sample Data Section -->
          <div class="demo-card">
            <h2 class="h4 mb-4 text-gray-800">üìä Sample Data</h2>
            <div class="row">
              <div class="col-md-6">
                <h5>Sample Customers</h5>
                <div class="list-group">
                  <button onclick="loadSampleCustomer('john-doe')" class="list-group-item list-group-item-action">
                    <strong>John Doe</strong>
                    <br />
                    <small class="text-muted">john.doe@email.com ‚Ä¢ Active Customer</small>
                  </button>
                  <button onclick="loadSampleCustomer('jane-smith')" class="list-group-item list-group-item-action">
                    <strong>Jane Smith</strong>
                    <br />
                    <small class="text-muted">jane.smith@email.com ‚Ä¢ High Roller</small>
                  </button>
                  <button onclick="loadSampleCustomer('bob-johnson')" class="list-group-item list-group-item-action">
                    <strong>Bob Johnson</strong>
                    <br />
                    <small class="text-muted">bob.johnson@email.com ‚Ä¢ Suspended</small>
                  </button>
                  <button onclick="loadSampleCustomer('alice-brown')" class="list-group-item list-group-item-action">
                    <strong>Alice Brown</strong>
                    <br />
                    <small class="text-muted">alice.brown@email.com ‚Ä¢ New Customer</small>
                  </button>
                </div>
              </div>
              <div class="col-md-6">
                <h5>Demo Actions</h5>
                <div class="d-grid gap-2">
                  <button onclick="createRandomCustomer()" class="btn btn-success">
                    <i class="fas fa-plus"></i>
                    Create Random Customer
                  </button>
                  <button onclick="performBulkOperations()" class="btn btn-info">
                    <i class="fas fa-tasks"></i>
                    Bulk Operations Demo
                  </button>
                  <button onclick="showRiskAssessment()" class="btn btn-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    Risk Assessment Demo
                  </button>
                  <button onclick="exportCustomerData()" class="btn btn-secondary">
                    <i class="fas fa-download"></i>
                    Export Demo Data
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Integration Information -->
          <div class="demo-card">
            <h2 class="h4 mb-4 text-gray-800">üîó System Integration</h2>
            <div class="row">
              <div class="col-md-6">
                <h5>Connected Services</h5>
                <ul class="list-group">
                  <li class="list-group-item">
                    <i class="fas fa-link text-success"></i>
                    Form Management Service
                  </li>
                  <li class="list-group-item">
                    <i class="fas fa-link text-success"></i>
                    Cashier Service
                  </li>
                  <li class="list-group-item">
                    <i class="fas fa-link text-success"></i>
                    Transaction Processing
                  </li>
                  <li class="list-group-item">
                    <i class="fas fa-link text-success"></i>
                    Financial Reporting
                  </li>
                  <li class="list-group-item">
                    <i class="fas fa-link text-success"></i>
                    Excel Export Service
                  </li>
                </ul>
              </div>
              <div class="col-md-6">
                <h5>Data Flow</h5>
                <div class="card">
                  <div class="card-body">
                    <p class="mb-2">
                      <strong>1.</strong>
                      Customer data captured via forms
                    </p>
                    <p class="mb-2">
                      <strong>2.</strong>
                      Validation and risk assessment
                    </p>
                    <p class="mb-2">
                      <strong>3.</strong>
                      Real-time sync to backend
                    </p>
                    <p class="mb-2">
                      <strong>4.</strong>
                      Integration with cashier transactions
                    </p>
                    <p class="mb-2">
                      <strong>5.</strong>
                      Audit trail and reporting
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Performance Metrics -->
          <div id="performance-metrics" class="demo-card" style="display: none">
            <h2 class="h4 mb-4 text-gray-800">üìà Performance Metrics</h2>
            <div class="row">
              <div class="col-md-3">
                <div class="text-center">
                  <h4 class="text-success" id="search-speed">0ms</h4>
                  <p>Search Speed</p>
                </div>
              </div>
              <div class="col-md-3">
                <div class="text-center">
                  <h4 class="text-info" id="validation-speed">0ms</h4>
                  <p>Validation Speed</p>
                </div>
              </div>
              <div class="col-md-3">
                <div class="text-center">
                  <h4 class="text-warning" id="sync-latency">0ms</h4>
                  <p>Sync Latency</p>
                </div>
              </div>
              <div class="col-md-3">
                <div class="text-center">
                  <h4 class="text-primary" id="memory-usage">0MB</h4>
                  <p>Memory Usage</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- jQuery (required for Bootstrap) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

    <!-- Customer Management Integration -->
    <script type="module">
      import { createCustomerInformationInterface } from './src/components/customer-information-interface.ts';
      import { CustomerInformationService } from './src/services/customer-information-service.ts';

      let customerInterface = null;
      let customerService = null;

      // Sample customer data
      const sampleCustomers = {
        'john-doe': {
          customerId: 'CUST_001',
          personalInfo: {
            firstName: 'John',
            lastName: 'Doe',
            email: 'john.doe@email.com',
            phone: '(555) 123-4567',
            altPhone: '(555) 987-6543',
            dateOfBirth: '1985-03-15',
          },
          address: {
            street: '123 Main Street',
            city: 'Miami',
            state: 'FL',
            zipCode: '33101',
            country: 'US',
          },
          financial: {
            currentBalance: 2500.0,
            creditLimit: 5000.0,
            availableCredit: 2500.0,
            riskScore: 25,
          },
          gaming: {
            accountStatus: 'active',
            registrationDate: '2023-01-15T10:30:00Z',
            lastLogin: new Date().toISOString(),
            totalBets: 150,
            totalWins: 120,
            totalLosses: 30,
          },
        },
        'jane-smith': {
          customerId: 'CUST_002',
          personalInfo: {
            firstName: 'Jane',
            lastName: 'Smith',
            email: 'jane.smith@email.com',
            phone: '(555) 234-5678',
            altPhone: '',
            dateOfBirth: '1990-07-22',
          },
          address: {
            street: '456 Oak Avenue',
            city: 'Fort Lauderdale',
            state: 'FL',
            zipCode: '33301',
            country: 'US',
          },
          financial: {
            currentBalance: 15000.0,
            creditLimit: 25000.0,
            availableCredit: 10000.0,
            riskScore: 15,
          },
          gaming: {
            accountStatus: 'active',
            registrationDate: '2022-11-08T14:20:00Z',
            lastLogin: new Date().toISOString(),
            totalBets: 500,
            totalWins: 380,
            totalLosses: 120,
          },
        },
        'bob-johnson': {
          customerId: 'CUST_003',
          personalInfo: {
            firstName: 'Bob',
            lastName: 'Johnson',
            email: 'bob.johnson@email.com',
            phone: '(555) 345-6789',
            altPhone: '',
            dateOfBirth: '1978-12-03',
          },
          address: {
            street: '789 Pine Road',
            city: 'West Palm Beach',
            state: 'FL',
            zipCode: '33401',
            country: 'US',
          },
          financial: {
            currentBalance: -500.0,
            creditLimit: 2000.0,
            availableCredit: 0,
            riskScore: 85,
          },
          gaming: {
            accountStatus: 'suspended',
            registrationDate: '2023-05-20T09:15:00Z',
            lastLogin: '2024-01-10T16:45:00Z',
            totalBets: 75,
            totalWins: 35,
            totalLosses: 40,
          },
        },
        'alice-brown': {
          customerId: 'CUST_004',
          personalInfo: {
            firstName: 'Alice',
            lastName: 'Brown',
            email: 'alice.brown@email.com',
            phone: '(555) 456-7890',
            altPhone: '(555) 111-2222',
            dateOfBirth: '1995-09-18',
          },
          address: {
            street: '321 Elm Street',
            city: 'Tampa',
            state: 'FL',
            zipCode: '33601',
            country: 'US',
          },
          financial: {
            currentBalance: 100.0,
            creditLimit: 1000.0,
            availableCredit: 900.0,
            riskScore: 10,
          },
          gaming: {
            accountStatus: 'active',
            registrationDate: new Date().toISOString(),
            lastLogin: new Date().toISOString(),
            totalBets: 5,
            totalWins: 3,
            totalLosses: 2,
          },
        },
      };

      // Global functions for HTML buttons
      window.initializeDemo = async function () {
        console.log('üöÄ Initializing Customer Management Demo...');

        // Show customer interface container
        const container = document.getElementById('customer-container');
        container.style.display = 'block';

        // Create customer interface
        customerInterface = await createCustomerInformationInterface(
          document.getElementById('customer-interface-content'),
          {
            enableSearch: true,
            enableCreate: true,
            enableEdit: true,
            enableExport: true,
            enableRealTimeUpdates: true,
            maxSearchResults: 100,
          }
        );

        // Get service instance for additional operations
        customerService = CustomerInformationService.getInstance();

        // Add sample customers
        await addSampleCustomers();

        // Show performance metrics
        document.getElementById('performance-metrics').style.display = 'block';

        // Start performance monitoring
        startPerformanceMonitoring();

        console.log('‚úÖ Customer Management Demo initialized successfully');
      };

      window.loadSampleCustomer = async function (customerKey) {
        if (!customerService) {
          alert('Please initialize the demo first');
          return;
        }

        const customerData = sampleCustomers[customerKey];
        if (customerData) {
          try {
            await customerService.createCustomer(customerData);
            alert(
              `‚úÖ Sample customer ${customerData.personalInfo.firstName} ${customerData.personalInfo.lastName} loaded successfully!`
            );
          } catch (error) {
            alert(`‚ùå Error loading sample customer: ${error.message}`);
          }
        }
      };

      window.createRandomCustomer = async function () {
        if (!customerService) {
          alert('Please initialize the demo first');
          return;
        }

        const firstNames = [
          'James',
          'Mary',
          'Michael',
          'Patricia',
          'Robert',
          'Jennifer',
          'David',
          'Linda',
          'Charles',
          'Barbara',
        ];
        const lastNames = [
          'Smith',
          'Johnson',
          'Williams',
          'Brown',
          'Jones',
          'Garcia',
          'Miller',
          'Davis',
          'Rodriguez',
          'Martinez',
        ];
        const cities = [
          'Miami',
          'Fort Lauderdale',
          'Tampa',
          'Orlando',
          'Jacksonville',
          'Tallahassee',
          'Cape Coral',
          'Pembroke Pines',
          'Hollywood',
          'Gainesville',
        ];
        const states = ['FL'];

        const randomCustomer = {
          customerId: `CUST_${Date.now()}`,
          personalInfo: {
            firstName: firstNames[Math.floor(Math.random() * firstNames.length)],
            lastName: lastNames[Math.floor(Math.random() * lastNames.length)],
            email: `${Math.random().toString(36).substr(2, 8)}@example.com`,
            phone: `(${Math.floor(Math.random() * 900) + 100}) ${Math.floor(Math.random() * 900) + 100}-${Math.floor(Math.random() * 9000) + 1000}`,
            altPhone:
              Math.random() > 0.5
                ? `(${Math.floor(Math.random() * 900) + 100}) ${Math.floor(Math.random() * 900) + 100}-${Math.floor(Math.random() * 9000) + 1000}`
                : '',
            dateOfBirth: `${1980 + Math.floor(Math.random() * 30)}-${String(Math.floor(Math.random() * 12) + 1).padStart(2, '0')}-${String(Math.floor(Math.random() * 28) + 1).padStart(2, '0')}`,
          },
          address: {
            street: `${Math.floor(Math.random() * 9999) + 1} ${['Main', 'Oak', 'Pine', 'Elm', 'Maple'][Math.floor(Math.random() * 5)]} ${['Street', 'Avenue', 'Road', 'Lane', 'Drive'][Math.floor(Math.random() * 5)]}`,
            city: cities[Math.floor(Math.random() * cities.length)],
            state: states[Math.floor(Math.random() * states.length)],
            zipCode: `${Math.floor(Math.random() * 90000) + 10000}`,
            country: 'US',
          },
          preferences: {
            language: 'en',
            timezone: 'America/New_York',
            currency: 'USD',
            notifications: {
              email: Math.random() > 0.5,
              sms: Math.random() > 0.5,
              push: Math.random() > 0.5,
              telegram: Math.random() > 0.3,
            },
            marketing: {
              email: Math.random() > 0.5,
              sms: Math.random() > 0.5,
              phone: Math.random() > 0.5,
            },
          },
          financial: {
            creditLimit: Math.floor(Math.random() * 10000) + 1000,
            currentBalance: Math.floor(Math.random() * 5000),
            availableCredit: 0, // Will be calculated
            riskScore: Math.floor(Math.random() * 100),
            paymentMethods: [],
            transactionHistory: [],
          },
          gaming: {
            accountStatus: ['active', 'active', 'active', 'suspended', 'pending'][Math.floor(Math.random() * 5)],
            registrationDate: new Date(Date.now() - Math.random() * 365 * 24 * 60 * 60 * 1000).toISOString(),
            lastLogin: new Date().toISOString(),
            totalBets: Math.floor(Math.random() * 1000),
            totalWins: 0, // Will be calculated
            totalLosses: 0, // Will be calculated
            favoriteSports: ['football', 'basketball', 'baseball', 'soccer', 'tennis'].slice(
              0,
              Math.floor(Math.random() * 3) + 1
            ),
            riskProfile: ['low', 'medium', 'high'][Math.floor(Math.random() * 3)],
          },
          verification: {
            emailVerified: Math.random() > 0.3,
            phoneVerified: Math.random() > 0.3,
            addressVerified: Math.random() > 0.5,
            identityVerified: Math.random() > 0.7,
            documents: [],
          },
          thirdParty: {
            paymentAddresses: [],
          },
        };

        // Calculate derived fields
        randomCustomer.financial.availableCredit =
          randomCustomer.financial.creditLimit - randomCustomer.financial.currentBalance;
        randomCustomer.financial.totalWins = Math.floor(randomCustomer.gaming.totalBets * (0.3 + Math.random() * 0.4));
        randomCustomer.financial.totalLosses = randomCustomer.gaming.totalBets - randomCustomer.financial.totalWins;

        try {
          const customer = await customerService.createCustomer(randomCustomer);
          alert(
            `‚úÖ Random customer ${customer.personalInfo.firstName} ${customer.personalInfo.lastName} created successfully!\nCustomer ID: ${customer.customerId}`
          );
        } catch (error) {
          alert(`‚ùå Error creating random customer: ${error.message}`);
        }
      };

      window.performBulkOperations = async function () {
        if (!customerService) {
          alert('Please initialize the demo first');
          return;
        }

        console.log('üîÑ Performing bulk operations demo...');

        // Create multiple customers
        const startTime = performance.now();
        const promises = [];

        for (let i = 0; i < 5; i++) {
          const customerData = {
            customerId: `BULK_${Date.now()}_${i}`,
            personalInfo: {
              firstName: `Bulk${i}`,
              lastName: 'Customer',
              email: `bulk${i}@example.com`,
              phone: `(555) 000-00${i.toString().padStart(2, '0')}`,
            },
            address: {
              street: `${100 + i} Test Street`,
              city: 'Test City',
              state: 'FL',
              zipCode: '12345',
              country: 'US',
            },
            financial: {
              creditLimit: 1000,
              currentBalance: Math.floor(Math.random() * 500),
              availableCredit: 0,
              riskScore: Math.floor(Math.random() * 50),
            },
            gaming: {
              accountStatus: 'active',
              registrationDate: new Date().toISOString(),
              lastLogin: new Date().toISOString(),
              totalBets: 0,
              totalWins: 0,
              totalLosses: 0,
              favoriteSports: ['football'],
              riskProfile: 'low',
            },
            verification: {
              emailVerified: false,
              phoneVerified: false,
              addressVerified: false,
              identityVerified: false,
              documents: [],
            },
            thirdParty: {
              paymentAddresses: [],
            },
          };

          customerData.financial.availableCredit =
            customerData.financial.creditLimit - customerData.financial.currentBalance;

          promises.push(customerService.createCustomer(customerData));
        }

        try {
          await Promise.all(promises);
          const endTime = performance.now();
          alert(
            `‚úÖ Bulk operations completed in ${(endTime - startTime).toFixed(2)}ms!\nCreated 5 customers successfully.`
          );
        } catch (error) {
          alert(`‚ùå Bulk operations failed: ${error.message}`);
        }
      };

      window.showRiskAssessment = async function () {
        if (!customerService) {
          alert('Please initialize the demo first');
          return;
        }

        const customers = await customerService.searchCustomers({}, { limit: 10 });
        let riskReport = 'üéØ Risk Assessment Report\n\n';

        customers.customers.forEach(customer => {
          const riskLevel =
            customer.financial.riskScore >= 70 ? 'HIGH' : customer.financial.riskScore >= 40 ? 'MEDIUM' : 'LOW';
          riskReport += `${customer.personalInfo.firstName} ${customer.personalInfo.lastName}: ${riskLevel} (${customer.financial.riskScore})\n`;
        });

        alert(riskReport);
      };

      window.exportCustomerData = async function () {
        if (!customerService) {
          alert('Please initialize the demo first');
          return;
        }

        try {
          const csvData = await customerService.exportCustomers();
          const blob = new Blob([csvData], { type: 'text/csv' });
          const url = URL.createObjectURL(blob);

          const a = document.createElement('a');
          a.href = url;
          a.download = `customers_export_${new Date().toISOString().split('T')[0]}.csv`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);

          alert('‚úÖ Customer data exported successfully!');
        } catch (error) {
          alert(`‚ùå Export failed: ${error.message}`);
        }
      };

      // Helper functions
      async function addSampleCustomers() {
        console.log('üìù Adding sample customers...');

        for (const [key, customerData] of Object.entries(sampleCustomers)) {
          try {
            await customerService.createCustomer(customerData);
          } catch (error) {
            console.warn(`‚ö†Ô∏è Could not add sample customer ${key}:`, error);
          }
        }

        console.log('‚úÖ Sample customers added');
      }

      function startPerformanceMonitoring() {
        setInterval(() => {
          updatePerformanceMetrics();
        }, 1000);
      }

      function updatePerformanceMetrics() {
        // Simulate performance metrics
        const searchSpeed = Math.floor(Math.random() * 50) + 10;
        const validationSpeed = Math.floor(Math.random() * 30) + 5;
        const syncLatency = Math.floor(Math.random() * 100) + 20;
        const memoryUsage = (Math.random() * 50 + 10).toFixed(1);

        document.getElementById('search-speed').textContent = `${searchSpeed}ms`;
        document.getElementById('validation-speed').textContent = `${validationSpeed}ms`;
        document.getElementById('sync-latency').textContent = `${syncLatency}ms`;
        document.getElementById('memory-usage').textContent = `${memoryUsage}MB`;
      }

      // Initialize demo on page load
      document.addEventListener('DOMContentLoaded', () => {
        console.log('üë§ Fire22 Customer Management Demo loaded');

        // Add keyboard shortcuts
        document.addEventListener('keydown', e => {
          if (e.ctrlKey || e.metaKey) {
            switch (e.key) {
              case 'n':
                e.preventDefault();
                if (customerInterface) {
                  customerInterface.showView('create');
                }
                break;
              case 'f':
                e.preventDefault();
                if (customerInterface) {
                  customerInterface.showView('search');
                }
                break;
              case 'l':
                e.preventDefault();
                if (customerInterface) {
                  customerInterface.showView('list');
                }
                break;
            }
          }
        });
      });
    </script>
  </body>
</html>
